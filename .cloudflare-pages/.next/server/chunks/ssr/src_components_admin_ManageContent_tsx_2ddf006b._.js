module.exports=[87717,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(99570);function e(){let[a,e]=(0,c.useState)("universities"),[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)({}),[r,s]=(0,c.useState)(null);(0,c.useEffect)(()=>{t()},[a]);let t=async()=>{m(!0);try{if("universities"===a){let a=await fetch("/api/admin/universities");if(a.ok){let b=await a.json();g(b)}}else if("departments"===a){let a=await fetch("/api/admin/departments");if(a.ok){let b=await a.json();i(b)}}else if("advisors"===a){let a=await fetch("/api/admin/advisors");if(a.ok){let b=await a.json();k(b)}}}catch(a){console.error("Error loading data:",a),s("Failed to load data")}finally{m(!1)}},u=async(a,b)=>{if(confirm(`Are you sure you want to delete this ${b.slice(0,-1)}?`))try{let c=`/api/admin/${b}/${a}`,d=await fetch(c,{method:"DELETE"});if(d.ok)t();else{let a=await d.json();alert(a.error||"Failed to delete")}}catch(a){console.error("Error deleting:",a),alert("Failed to delete")}},v=async b=>{b.preventDefault(),s(null);try{let b=`/api/admin/${a}`,c=await fetch(b,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}),d=await c.json();if(c.ok)o(!1),q({}),t();else{let a=d.error||d.details?.[0]?.message||"Failed to create";s(a),console.error("Create error:",d)}}catch(a){console.error("Error creating:",a),s(a instanceof Error?a.message:"Failed to create")}},w=a=>a.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"border-b border-gray-200",children:(0,b.jsx)("nav",{className:"-mb-px flex space-x-8",children:["universities","departments","advisors"].map(c=>(0,b.jsx)("button",{onClick:()=>e(c),className:`py-4 px-1 border-b-2 font-medium text-sm ${a===c?"border-[#A78BFA] text-[#5B2D8B]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:c.charAt(0).toUpperCase()+c.slice(1)},c))})}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:a.charAt(0).toUpperCase()+a.slice(1)}),(0,b.jsx)(d.Button,{onClick:()=>o(!n),children:n?"Cancel":`Add ${a.slice(0,-1)}`})]}),n&&(0,b.jsxs)("form",{onSubmit:v,className:"bg-white p-6 rounded-lg shadow space-y-4",children:["universities"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name *"}),(0,b.jsx)("input",{type:"text",required:!0,value:p.name||"",onChange:a=>{let b=a.target.value;q({...p,name:b,slug:w(b)})},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Slug *"}),(0,b.jsx)("input",{type:"text",required:!0,value:p.slug||"",onChange:a=>q({...p,slug:a.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Location (optional)"}),(0,b.jsx)("input",{type:"text",value:p.location||"",onChange:a=>q({...p,location:a.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"e.g., Cambridge, MA"})]})]}),"departments"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"University *"}),(0,b.jsxs)("select",{required:!0,value:p.universityId||"",onChange:a=>q({...p,universityId:a.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",children:[(0,b.jsx)("option",{value:"",children:"Select university"}),f.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name *"}),(0,b.jsx)("input",{type:"text",required:!0,value:p.name||"",onChange:a=>{let b=a.target.value;q({...p,name:b,slug:w(b)})},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Slug *"}),(0,b.jsx)("input",{type:"text",required:!0,value:p.slug||"",onChange:a=>q({...p,slug:a.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]})]}),"advisors"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Department *"}),(0,b.jsxs)("select",{required:!0,value:p.departmentId||"",onChange:a=>q({...p,departmentId:a.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",children:[(0,b.jsx)("option",{value:"",children:"Select department"}),h.map(a=>(0,b.jsxs)("option",{value:a.id,children:[a.university.name," - ",a.name]},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"First Name *"}),(0,b.jsx)("input",{type:"text",required:!0,value:p.firstName||"",onChange:a=>{let b=a.target.value,c=p.lastName||"";q({...p,firstName:b,slug:w(`${b} ${c}`)})},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Last Name *"}),(0,b.jsx)("input",{type:"text",required:!0,value:p.lastName||"",onChange:a=>{let b=a.target.value,c=p.firstName||"";q({...p,lastName:b,slug:w(`${c} ${b}`)})},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Slug *"}),(0,b.jsx)("input",{type:"text",required:!0,value:p.slug||"",onChange:a=>q({...p,slug:a.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Title (optional)"}),(0,b.jsx)("input",{type:"text",value:p.title||"",onChange:a=>q({...p,title:a.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"e.g., Senior Academic Advisor"})]})]}),r&&(0,b.jsx)("div",{className:"text-red-600 text-sm",children:r}),(0,b.jsx)(d.Button,{type:"submit",children:"Create"})]}),l?(0,b.jsx)("div",{className:"text-center py-8",children:"Loading..."}):(0,b.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:["universities"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Slug"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Departments"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]}),"departments"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"University"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Advisors"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]}),"advisors"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"University"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Department"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Reviews"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})]})}),(0,b.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:["universities"===a&&f.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.name}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.slug}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a._count.departments}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,b.jsx)("button",{onClick:()=>u(a.id,"universities"),className:"text-red-600 hover:text-red-900",children:"Delete"})})]},a.id)),"departments"===a&&h.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.university.name}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.name}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a._count.advisors}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,b.jsx)("button",{onClick:()=>u(a.id,"departments"),className:"text-red-600 hover:text-red-900",children:"Delete"})})]},a.id)),"advisors"===a&&j.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.department.university.name}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:a.department.name}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.name}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a._count.reviews}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,b.jsx)("button",{onClick:()=>u(a.id,"advisors"),className:"text-red-600 hover:text-red-900",children:"Delete"})})]},a.id))]})]})})]})}a.s(["ManageContent",()=>e])}];

//# sourceMappingURL=src_components_admin_ManageContent_tsx_2ddf006b._.js.map