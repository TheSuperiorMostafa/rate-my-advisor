{"version":3,"sources":["../../../../src/components/ui/Card.tsx","../../../../src/components/search/AutocompleteSearch.tsx/__nextjs-internal-proxy.mjs","../../../../src/components/ui/StarRating.tsx/__nextjs-internal-proxy.mjs","../../../../src/app/d/%5BdepartmentId%5D/%5Bslug%5D/page.tsx","../../../../src/components/advisor/AdvisorCard.tsx"],"sourcesContent":["import { HTMLAttributes, forwardRef } from \"react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface CardProps extends HTMLAttributes<HTMLDivElement> {\n  variant?: \"default\" | \"elevated\" | \"outlined\" | \"interactive\";\n  children: React.ReactNode;\n}\n\nexport const Card = forwardRef<HTMLDivElement, CardProps>(\n  ({ className, variant = \"default\", children, ...props }, ref) => {\n    const variants = {\n      default: \"bg-white border border-gray-200\",\n      elevated: \"bg-white shadow-sm border border-gray-200\",\n      outlined: \"bg-transparent border-2 border-gray-200\",\n      interactive: \"bg-white border border-gray-200 hover:border-[#A78BFA] hover:shadow-md transition-all cursor-pointer\",\n    };\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\"rounded-xl p-6\", variants[variant], className)}\n        {...props}\n      >\n        {children}\n      </div>\n    );\n  }\n);\n\nCard.displayName = \"Card\";\n\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AutocompleteSearch = registerClientReference(\n    function() { throw new Error(\"Attempted to call AutocompleteSearch() from the server but AutocompleteSearch is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/search/AutocompleteSearch.tsx\",\n    \"AutocompleteSearch\",\n);\n","// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const StarRating = registerClientReference(\n    function() { throw new Error(\"Attempted to call StarRating() from the server but StarRating is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/StarRating.tsx\",\n    \"StarRating\",\n);\n","import { Metadata } from \"next\";\nimport { notFound } from \"next/navigation\";\nimport { AdvisorCard } from \"@/components/advisor/AdvisorCard\";\nimport { AutocompleteSearch } from \"@/components/search/AutocompleteSearch\";\nimport { Breadcrumbs } from \"@/components/ui/Breadcrumbs\";\nimport { Card } from \"@/components/ui/Card\";\nimport { Skeleton, CardSkeleton } from \"@/components/ui/Skeleton\";\nimport { Suspense } from \"react\";\nimport Link from \"next/link\";\nimport { prisma } from \"@/lib/prisma\";\nimport { GraduationCap } from \"lucide-react\";\n\ninterface PageProps {\n  params: Promise<{\n    departmentId: string;\n    slug: string;\n  }>;\n  searchParams: Promise<{ [key: string]: string | string[] | undefined }>;\n}\n\nasync function getDepartment(departmentId: string) {\n  try {\n    const department = await prisma.department.findUnique({\n      where: { id: departmentId },\n      include: {\n        university: {\n          select: {\n            id: true,\n            name: true,\n            slug: true,\n          },\n        },\n      },\n    });\n    return department;\n  } catch {\n    return null;\n  }\n}\n\nasync function getAdvisors(departmentId: string, query?: string) {\n  try {\n    const where = {\n      departmentId,\n      isActive: true,\n      ...(query && {\n        OR: [\n          { firstName: { contains: query, mode: \"insensitive\" as const } },\n          { lastName: { contains: query, mode: \"insensitive\" as const } },\n        ],\n      }),\n    };\n\n    const [advisors, total] = await Promise.all([\n      prisma.advisor.findMany({\n        where,\n        orderBy: [{ lastName: \"asc\" }, { firstName: \"asc\" }],\n        select: {\n          id: true,\n          firstName: true,\n          lastName: true,\n          slug: true,\n          title: true,\n          _count: {\n            select: {\n              reviews: {\n                where: {\n                  status: \"approved\",\n                },\n              },\n            },\n          },\n        },\n      }),\n      prisma.advisor.count({ where }),\n    ]);\n\n    return { advisors, pagination: { total } };\n  } catch {\n    return { advisors: [], pagination: { total: 0 } };\n  }\n}\n\nexport async function generateMetadata({ params }: PageProps): Promise<Metadata> {\n  const { departmentId } = await params;\n  const department = await getDepartment(departmentId);\n\n  if (!department) {\n    return {\n      title: \"Department Not Found\",\n    };\n  }\n\n  return {\n    title: `${department.name} - ${department.university.name} | Rate My Advisor`,\n    description: `Browse advisors in ${department.name} at ${department.university.name}. Read student reviews and ratings.`,\n  };\n}\n\nexport default async function DepartmentPage({ params, searchParams }: PageProps) {\n  const { departmentId } = await params;\n  const { query } = await searchParams;\n  const searchQuery = typeof query === \"string\" ? query : \"\";\n\n  const department = await getDepartment(departmentId);\n  if (!department) {\n    notFound();\n  }\n\n  const advisorsData = await getAdvisors(departmentId, searchQuery);\n  const advisors = advisorsData.advisors || [];\n\n  const breadcrumbs = [\n    { label: \"Home\", href: \"/\" },\n    {\n      label: department.university.name,\n      href: `/u/${department.university.id}/${department.university.slug}`,\n    },\n    { label: department.name },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header Section */}\n      <div className=\"bg-white border-b border-gray-200\">\n        <div className=\"container-custom py-8 md:py-12\">\n          <Breadcrumbs items={breadcrumbs} className=\"mb-6\" />\n          \n          <div className=\"flex items-start gap-4 mb-6\">\n            <div className=\"p-3 bg-[#F5F0FF] rounded-xl\">\n              <GraduationCap className=\"w-8 h-8 text-[#5B2D8B]\" />\n            </div>\n            <div className=\"flex-1\">\n              <h1 className=\"text-3xl md:text-4xl font-bold text-gray-900 mb-2\">\n                {department.name}\n              </h1>\n              <p className=\"text-lg text-gray-600\">{department.university.name}</p>\n            </div>\n          </div>\n\n          <div className=\"max-w-2xl\">\n            <AutocompleteSearch\n              placeholder={`Find an advisor in ${department.name}...`}\n              initialValue={searchQuery}\n              autoFocus\n              context={{\n                universityId: department.university.id,\n                departmentId: department.id,\n                universityName: department.university.name,\n              }}\n            />\n          </div>\n        </div>\n      </div>\n\n      {/* Advisors Section */}\n      <div className=\"container-custom py-8 md:py-12\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h2 className=\"text-2xl md:text-3xl font-bold text-gray-900\">\n            Advisors\n            {advisorsData.pagination?.total !== undefined && (\n              <span className=\"text-gray-500 font-normal ml-2\">\n                ({advisorsData.pagination.total})\n              </span>\n            )}\n          </h2>\n        </div>\n\n        {advisors.length > 0 ? (\n          <div className=\"space-y-4\">\n            {advisors.map((advisor: any) => (\n              <AdvisorCard\n                key={advisor.id}\n                id={advisor.id}\n                firstName={advisor.firstName}\n                lastName={advisor.lastName}\n                slug={advisor.slug}\n                title={advisor.title}\n                reviewCount={advisor._count?.reviews || 0}\n              />\n            ))}\n          </div>\n        ) : (\n          <Card className=\"text-center py-12\">\n            <GraduationCap className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n              {searchQuery ? `No advisors found` : \"No advisors yet\"}\n            </h3>\n            <p className=\"text-gray-600\">\n              {searchQuery\n                ? `Try a different search term`\n                : \"Advisors will appear here once added\"}\n            </p>\n          </Card>\n        )}\n      </div>\n    </div>\n  );\n}\n","import Link from \"next/link\";\nimport { Card } from \"@/components/ui/Card\";\nimport { StarRating } from \"@/components/ui/StarRating\";\nimport { ChevronRight } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface AdvisorCardProps {\n  id: string;\n  firstName: string;\n  lastName: string;\n  slug: string;\n  title?: string | null;\n  reviewCount: number;\n  overallRating?: number;\n  className?: string;\n}\n\nexport function AdvisorCard({\n  id,\n  firstName,\n  lastName,\n  slug,\n  title,\n  reviewCount,\n  overallRating,\n  className,\n}: AdvisorCardProps) {\n  const name = `${firstName} ${lastName}`;\n  const href = `/a/${id}/${slug}`;\n\n  return (\n    <Link href={href} className={cn(\"block\", className)}>\n      <Card variant=\"interactive\" className=\"group\">\n        <div className=\"flex items-start justify-between gap-4\">\n          <div className=\"flex-1 min-w-0\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-1 group-hover:text-[#5B2D8B] transition-colors\">\n              {name}\n            </h3>\n            {title && (\n              <p className=\"text-sm text-gray-600 mb-3 line-clamp-1\">{title}</p>\n            )}\n            <div className=\"flex items-center gap-4\">\n              {overallRating !== undefined && overallRating > 0 ? (\n                <div className=\"flex items-center gap-2\">\n                  <StarRating rating={overallRating} size=\"sm\" showValue />\n                  <span className=\"text-sm text-gray-500\">\n                    ({reviewCount} {reviewCount === 1 ? \"review\" : \"reviews\"})\n                  </span>\n                </div>\n              ) : (\n                <span className=\"text-sm text-gray-500\">\n                  {reviewCount} {reviewCount === 1 ? \"review\" : \"reviews\"}\n                </span>\n              )}\n            </div>\n          </div>\n          <ChevronRight className=\"w-5 h-5 text-gray-400 group-hover:text-[#5B2D8B] transition-colors flex-shrink-0\" />\n        </div>\n      </Card>\n    </Link>\n  );\n}\n"],"names":[],"mappings":"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","ignoreList":[1,2]}