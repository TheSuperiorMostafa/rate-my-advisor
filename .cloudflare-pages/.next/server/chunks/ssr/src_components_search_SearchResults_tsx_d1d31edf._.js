module.exports=[18851,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(87532),f=a.i(33508),g=a.i(68114);function h({placeholder:a="Search...",initialValue:h="",onSearch:i,className:j,size:k="md",autoFocus:l=!1}){let[m,n]=(0,c.useState)(h),o=(0,d.useRouter)(),p=(0,d.useSearchParams)(),q=(0,c.useRef)(null),r=(0,c.useRef)(void 0);return(0,c.useEffect)(()=>{let a=p.get("q")||"";a!==m&&n(a)},[p]),(0,c.useEffect)(()=>{l&&q.current&&q.current.focus()},[l]),(0,b.jsx)("form",{onSubmit:a=>{a.preventDefault(),i?i(m):o.push(`/search?q=${encodeURIComponent(m)}`)},className:(0,g.cn)("w-full",j),children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none",children:(0,b.jsx)(e.Search,{className:"w-5 h-5 text-gray-400","aria-hidden":"true"})}),(0,b.jsx)("input",{ref:q,type:"text",value:m,onChange:a=>{var b;n(b=a.target.value),r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{if(!i&&b){let a=new URLSearchParams(p.toString());b?a.set("q",b):a.delete("q"),o.push(`?${a.toString()}`,{scroll:!1})}},300)},placeholder:a,className:(0,g.cn)("w-full border border-gray-300 rounded-xl","focus:outline-none focus:ring-2 focus:ring-[#A78BFA] focus:border-transparent","placeholder:text-gray-400",m?"pr-12":"pr-4","pl-12",{sm:"py-2 text-sm",md:"py-3 text-base",lg:"py-4 text-lg"}[k]),"aria-label":a}),m&&(0,b.jsx)("button",{type:"button",onClick:()=>{if(n(""),q.current&&q.current.focus(),!i){let a=new URLSearchParams(p.toString());a.delete("q"),o.push(`?${a.toString()}`,{scroll:!1})}},className:"absolute inset-y-0 right-0 flex items-center pr-4 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Clear search",children:(0,b.jsx)(f.X,{className:"w-5 h-5"})})]})})}var i=a.i(38246);function j({query:a,type:e}){let f=(0,d.useSearchParams)(),[g,j]=(0,c.useState)(a),[k,l]=(0,c.useState)(e),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(null);(0,c.useEffect)(()=>{g.trim().length>=2?s(g,k):n(null)},[g,k]);let s=async(a,b)=>{p(!0),r(null);try{let c=await fetch(`/api/search?q=${encodeURIComponent(a)}&type=${b}`);if(!c.ok)throw Error("Search failed");let d=await c.json();n(d.data||{universities:[],departments:[],advisors:[]})}catch(a){r(a instanceof Error?a.message:"Failed to search"),n(null)}finally{p(!1)}},t=(m?.universities.length||0)+(m?.departments.length||0)+(m?.advisors.length||0);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,b.jsx)(h,{placeholder:"Search universities, departments, or advisors...",initialValue:g,onSearch:a=>{j(a);let b=new URLSearchParams(f.toString());b.set("q",a),window.history.pushState({},"",`/search?${b.toString()}`)}})}),(0,b.jsx)("div",{className:"flex gap-2",children:["all","university","department","advisor"].map(a=>(0,b.jsx)("button",{onClick:()=>l(a),className:`px-4 py-2 rounded-md text-sm font-medium ${k===a?"bg-[#5B2D8B] text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:a.charAt(0).toUpperCase()+a.slice(1)},a))}),o&&(0,b.jsx)("div",{className:"text-center py-12",children:(0,b.jsx)("p",{className:"text-gray-500",children:"Searching..."})}),q&&(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,b.jsx)("p",{className:"text-red-800",children:q})}),!o&&!q&&g.trim().length<2&&(0,b.jsx)("div",{className:"text-center py-12",children:(0,b.jsx)("p",{className:"text-gray-500",children:"Enter at least 2 characters to search"})}),!o&&!q&&g.trim().length>=2&&0===t&&(0,b.jsx)("div",{className:"text-center py-12",children:(0,b.jsxs)("p",{className:"text-gray-500",children:['No results found for "',g,'"']})}),!o&&!q&&m&&t>0&&(0,b.jsxs)("div",{className:"space-y-8",children:[("all"===k||"university"===k)&&m.universities.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:["Universities (",m.universities.length,")"]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.universities.map(a=>(0,b.jsxs)(i.default,{href:`/u/${a.id}/${a.slug}`,className:"block p-4 bg-white border border-gray-200 rounded-lg hover:border-violet-300 hover:shadow-md transition-all",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:a.name}),a.location&&(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:a.location}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:[a.departmentCount," ",1===a.departmentCount?"department":"departments"]})]},a.id))})]}),("all"===k||"department"===k)&&m.departments.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:["Departments (",m.departments.length,")"]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.departments.map(a=>(0,b.jsxs)(i.default,{href:`/d/${a.id}/${a.slug}`,className:"block p-4 bg-white border border-gray-200 rounded-lg hover:border-violet-300 hover:shadow-md transition-all",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:a.university.name}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:[a.advisorCount," ",1===a.advisorCount?"advisor":"advisors"]})]},a.id))})]}),("all"===k||"advisor"===k)&&m.advisors.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:["Advisors (",m.advisors.length,")"]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.advisors.map(a=>(0,b.jsxs)(i.default,{href:`/a/${a.id}/${a.slug}`,className:"block p-4 bg-white border border-gray-200 rounded-lg hover:border-violet-300 hover:shadow-md transition-all",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:a.name}),a.title&&(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:a.title}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[a.department.name," - ",a.university.name]}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:[a.reviewCount," ",1===a.reviewCount?"review":"reviews"]})]},a.id))})]})]})]})}a.s(["SearchResults",()=>j],18851)}];

//# sourceMappingURL=src_components_search_SearchResults_tsx_d1d31edf._.js.map