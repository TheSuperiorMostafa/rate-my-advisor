module.exports=[94753,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(87532),f=a.i(33508),g=a.i(68114),h=a.i(38246),i=a.i(69769),j=a.i(67900),k=a.i(46842);let l={university:i.GraduationCap,department:j.Building2,advisor:k.User},m={university:"text-[#5B2D8B]",department:"text-blue-600",advisor:"text-teal-600"};function n({type:a,name:c,subtitle:d,href:e,isSelected:f=!1,onClick:i}){let j=l[a];return(0,b.jsxs)(h.default,{href:e,onClick:i,className:(0,g.cn)("flex items-start gap-3 p-3 rounded-lg transition-colors","hover:bg-gray-50 focus:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-[#A78BFA] focus:ring-offset-1",f&&"bg-gray-50 ring-2 ring-[#A78BFA] ring-offset-1"),role:"option","aria-selected":f,children:[(0,b.jsx)(j,{className:(0,g.cn)("w-5 h-5 flex-shrink-0 mt-0.5",m[a])}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("div",{className:"font-medium text-gray-900 truncate",children:c}),d&&(0,b.jsx)("div",{className:"text-sm text-gray-500 truncate mt-0.5",children:d})]})]})}function o({query:a,results:d,loading:f,selectedIndex:j,onSelect:k,context:l}){let m=(0,c.useRef)(null),o=(0,c.useRef)(null);(0,c.useEffect)(()=>{if(o.current){let a=o.current.querySelector("a");a&&a.scrollIntoView({block:"nearest",behavior:"smooth"})}},[j]);let p=(()=>{if(!d)return[];let a=[],b=0;return l?.universityId||l?.departmentId?(d.advisors&&d.advisors.forEach(c=>{l?.departmentId,c.department.id,a.push({type:"advisor",data:c,href:`/a/${c.id}/${c.slug}`,subtitle:`${c.department.name} • ${c.university.name}`,index:b++})}),d.departments&&d.departments.forEach(c=>{a.push({type:"department",data:c,href:`/d/${c.id}/${c.slug}`,subtitle:c.university.name,index:b++})})):(d.universities&&d.universities.forEach(c=>{a.push({type:"university",data:c,href:`/u/${c.id}/${c.slug}`,subtitle:c.location||"",index:b++})}),d.departments&&d.departments.forEach(c=>{a.push({type:"department",data:c,href:`/d/${c.id}/${c.slug}`,subtitle:c.university.name,index:b++})}),d.advisors&&d.advisors.forEach(c=>{a.push({type:"advisor",data:c,href:`/a/${c.id}/${c.slug}`,subtitle:`${c.department.name} • ${c.university.name}`,index:b++})})),a})();if(f)return(0,b.jsx)("div",{ref:m,className:"absolute z-50 w-full mt-2 bg-white border border-gray-200 rounded-xl shadow-lg max-h-96 overflow-y-auto",role:"listbox","aria-label":"Search results",children:(0,b.jsx)("div",{className:"p-4",children:(0,b.jsx)("div",{className:"space-y-3",children:[1,2,3].map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-3 animate-pulse",children:[(0,b.jsx)("div",{className:"w-5 h-5 bg-gray-200 rounded flex-shrink-0"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,b.jsx)("div",{className:"h-3 bg-gray-100 rounded w-1/2"})]})]},a))})})});if(!d||0===p.length)return a.trim().length>=1?(0,b.jsx)("div",{ref:m,className:"absolute z-50 w-full mt-2 bg-white border border-gray-200 rounded-xl shadow-lg",role:"listbox",children:(0,b.jsxs)("div",{className:"p-4 text-center text-gray-500",children:[(0,b.jsx)(e.Search,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),(0,b.jsxs)("p",{children:['No results found for "',a,'"']}),l?.universityId&&(0,b.jsxs)("p",{className:"text-sm mt-2",children:["Try searching for advisors or departments at ",l.universityName]})]})}):null;let q={universities:p.filter(a=>"university"===a.type),departments:p.filter(a=>"department"===a.type),advisors:p.filter(a=>"advisor"===a.type)};return Object.values(q).some(a=>a.length>0)?(0,b.jsx)("div",{ref:m,className:"absolute z-50 w-full mt-2 bg-white border border-gray-200 rounded-xl shadow-lg max-h-96 overflow-y-auto",role:"listbox","aria-label":"Search results",children:(0,b.jsxs)("div",{className:"p-2",children:[q.universities.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:["Universities (",q.universities.length,")"]}),q.universities.map(a=>(0,b.jsx)("div",{ref:a.index===j?o:null,children:(0,b.jsx)(n,{type:a.type,id:a.data.id,name:a.data.name,slug:a.data.slug,subtitle:a.subtitle,href:a.href,isSelected:a.index===j,onClick:k})},a.data.id))]}),q.departments.length>0&&(0,b.jsxs)("div",{className:q.universities.length>0?"mt-2":"",children:[(0,b.jsxs)("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:["Departments (",q.departments.length,")"]}),q.departments.map(a=>(0,b.jsx)("div",{ref:a.index===j?o:null,children:(0,b.jsx)(n,{type:a.type,id:a.data.id,name:a.data.name,slug:a.data.slug,subtitle:a.subtitle,href:a.href,isSelected:a.index===j,onClick:k})},a.data.id))]}),q.advisors.length>0&&(0,b.jsxs)("div",{className:q.departments.length>0||q.universities.length>0?"mt-2":"",children:[(0,b.jsxs)("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:["Advisors (",q.advisors.length,")"]}),q.advisors.map(a=>(0,b.jsx)("div",{ref:a.index===j?o:null,children:(0,b.jsx)(n,{type:a.type,id:a.data.id,name:a.data.name,slug:a.data.slug,subtitle:a.subtitle,href:a.href,isSelected:a.index===j,onClick:k})},a.data.id))]}),(l?.universityId||l?.departmentId)&&(0,b.jsx)("div",{className:"mt-2 pt-2 border-t border-gray-200",children:(0,b.jsx)("div",{ref:p.length===j?o:null,children:(0,b.jsxs)(h.default,{href:"/",className:(0,g.cn)("flex items-center gap-2 p-3 rounded-lg text-sm font-medium transition-colors","hover:bg-gray-50 focus:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-[#A78BFA] focus:ring-offset-1",p.length===j&&"bg-gray-50 ring-2 ring-[#A78BFA] ring-offset-1","text-[#5B2D8B]"),onClick:k,children:[(0,b.jsx)(i.GraduationCap,{className:"w-4 h-4"}),"Search another university..."]})})})]})}):null}function p({placeholder:a="Search universities, departments, advisors...",initialValue:h="",className:i,size:j="md",autoFocus:k=!1,helperText:l,context:m}){let[n,p]=(0,c.useState)(h),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(0),[w,x]=(0,c.useState)(!1),y=(0,d.useRouter)();(0,d.usePathname)();let z=(0,c.useRef)(null),A=(0,c.useRef)(null),B=(0,c.useRef)(void 0);(0,c.useEffect)(()=>{k&&z.current&&z.current.focus()},[k]),(0,c.useEffect)(()=>{function a(a){A.current&&!A.current.contains(a.target)&&x(!1)}return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]),(0,c.useEffect)(()=>{if(n.trim().length<1){r(null),x(!1);return}return B.current&&clearTimeout(B.current),B.current=setTimeout(async()=>{t(!0),x(!0);try{let a=new URLSearchParams({query:n.trim()});m?.universityId&&a.set("universityId",m.universityId),m?.departmentId&&a.set("departmentId",m.departmentId);let b=await fetch(`/api/autocomplete?${a.toString()}`);if(b.ok){let a=await b.json();r(a.data||{universities:[],departments:[],advisors:[]})}else r({universities:[],departments:[],advisors:[]})}catch(a){console.error("Autocomplete error:",a),r({universities:[],departments:[],advisors:[]})}finally{t(!1)}},250),()=>{B.current&&clearTimeout(B.current)}},[n,m]);let C=()=>q?(q.universities?.length||0)+(q.departments?.length||0)+(q.advisors?.length||0)+(m?.universityId||m?.departmentId?1:0):0;return(0,b.jsxs)("div",{ref:A,className:(0,g.cn)("relative w-full",i),children:[(0,b.jsx)("form",{onSubmit:a=>{if(a.preventDefault(),n.trim().length>=1){let a=(()=>{if(!q)return[];let a=[];return m?.universityId||m?.departmentId?(q.advisors&&q.advisors.forEach(b=>{a.push({href:`/a/${b.id}/${b.slug}`})}),q.departments&&q.departments.forEach(b=>{a.push({href:`/d/${b.id}/${b.slug}`})})):(q.universities&&q.universities.forEach(b=>{a.push({href:`/u/${b.id}/${b.slug}`})}),q.departments&&q.departments.forEach(b=>{a.push({href:`/d/${b.id}/${b.slug}`})}),q.advisors&&q.advisors.forEach(b=>{a.push({href:`/a/${b.id}/${b.slug}`})})),a})();C(),a.length>0&&u>=0&&u<a.length?(y.push(a[u].href),x(!1),p("")):m?.universityId&&u===a.length?(y.push("/"),x(!1),p("")):(y.push(`/search?q=${encodeURIComponent(n)}`),x(!1))}},children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none",children:(0,b.jsx)(e.Search,{className:"w-5 h-5 text-gray-400","aria-hidden":"true"})}),(0,b.jsx)("input",{ref:z,type:"text",value:n,onChange:a=>{p(a.target.value),v(0)},onKeyDown:a=>{let b=C();"ArrowDown"===a.key?(a.preventDefault(),v(a=>a<b-1?a+1:0)):"ArrowUp"===a.key?(a.preventDefault(),v(a=>a>0?a-1:b-1)):"Escape"===a.key?(a.preventDefault(),x(!1)):a.key},onFocus:()=>{(n.trim().length>0||q)&&x(!0)},placeholder:a,className:(0,g.cn)("w-full border border-gray-300 rounded-xl","focus:outline-none focus:ring-2 focus:ring-[#A78BFA] focus:border-transparent","placeholder:text-gray-400",n?"pr-12":"pr-4",{sm:"py-2 text-sm pl-10 pr-10",md:"py-3 text-base pl-12 pr-12",lg:"py-4 text-lg pl-14 pr-14"}[j]),"aria-label":a,"aria-expanded":w,"aria-haspopup":"listbox",role:"combobox",autoComplete:"off"}),n&&(0,b.jsx)("button",{type:"button",onClick:()=>{p(""),x(!1),z.current&&z.current.focus()},className:"absolute inset-y-0 right-0 flex items-center pr-4 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Clear search",children:(0,b.jsx)(f.X,{className:"w-5 h-5"})})]})}),l&&(0,b.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:l}),w&&(0,b.jsx)(o,{query:n,results:q,loading:s,selectedIndex:u,onSelect:()=>{x(!1),p("")},context:m})]})}a.s(["AutocompleteSearch",()=>p],94753)},37947,a=>{"use strict";var b=a.i(72131),c=a.i(76555);function d({university:a}){let{setUniversity:d,selectedUniversity:e}=(0,c.useUniversityContext)();return(0,b.useEffect)(()=>{e&&e.id===a.id||d(a)},[a,e,d]),null}a.s(["UniversityContextSync",()=>d])}];

//# sourceMappingURL=src_components_b4a881d6._.js.map