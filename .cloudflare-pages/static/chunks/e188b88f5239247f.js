(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33494,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(18566),a=e.i(55436),i=e.i(37727),n=e.i(75157),l=e.i(22016),d=e.i(32095),u=e.i(7486),o=e.i(84614);let c={university:d.GraduationCap,department:u.Building2,advisor:o.User},m={university:"text-[#5B2D8B]",department:"text-blue-600",advisor:"text-teal-600"};function h({type:e,name:r,subtitle:s,href:a,isSelected:i=!1,onClick:d}){let u=c[e];return(0,t.jsxs)(l.default,{href:a,onClick:d,className:(0,n.cn)("flex items-start gap-3 p-3 rounded-lg transition-colors","hover:bg-gray-50 focus:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-[#A78BFA] focus:ring-offset-1",i&&"bg-gray-50 ring-2 ring-[#A78BFA] ring-offset-1"),role:"option","aria-selected":i,children:[(0,t.jsx)(u,{className:(0,n.cn)("w-5 h-5 flex-shrink-0 mt-0.5",m[e])}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"font-medium text-gray-900 truncate",children:r}),s&&(0,t.jsx)("div",{className:"text-sm text-gray-500 truncate mt-0.5",children:s})]})]})}function p({query:e,results:s,loading:i,selectedIndex:u,onSelect:o,context:c}){let m=(0,r.useRef)(null),p=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(p.current){let e=p.current.querySelector("a");e&&e.scrollIntoView({block:"nearest",behavior:"smooth"})}},[u]);let f=(()=>{if(!s)return[];let e=[],t=0;return c?.universityId||c?.departmentId?(s.advisors&&s.advisors.forEach(r=>{c?.departmentId,r.department.id,e.push({type:"advisor",data:r,href:`/a/${r.id}/${r.slug}`,subtitle:`${r.department.name} • ${r.university.name}`,index:t++})}),s.departments&&s.departments.forEach(r=>{e.push({type:"department",data:r,href:`/d/${r.id}/${r.slug}`,subtitle:r.university.name,index:t++})})):(s.universities&&s.universities.forEach(r=>{e.push({type:"university",data:r,href:`/u/${r.id}/${r.slug}`,subtitle:r.location||"",index:t++})}),s.departments&&s.departments.forEach(r=>{e.push({type:"department",data:r,href:`/d/${r.id}/${r.slug}`,subtitle:r.university.name,index:t++})}),s.advisors&&s.advisors.forEach(r=>{e.push({type:"advisor",data:r,href:`/a/${r.id}/${r.slug}`,subtitle:`${r.department.name} • ${r.university.name}`,index:t++})})),e})();if(i)return(0,t.jsx)("div",{ref:m,className:"absolute z-50 w-full mt-2 bg-white border border-gray-200 rounded-xl shadow-lg max-h-96 overflow-y-auto",role:"listbox","aria-label":"Search results",children:(0,t.jsx)("div",{className:"p-4",children:(0,t.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3 animate-pulse",children:[(0,t.jsx)("div",{className:"w-5 h-5 bg-gray-200 rounded flex-shrink-0"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,t.jsx)("div",{className:"h-3 bg-gray-100 rounded w-1/2"})]})]},e))})})});if(!s||0===f.length)return e.trim().length>=1?(0,t.jsx)("div",{ref:m,className:"absolute z-50 w-full mt-2 bg-white border border-gray-200 rounded-xl shadow-lg",role:"listbox",children:(0,t.jsxs)("div",{className:"p-4 text-center text-gray-500",children:[(0,t.jsx)(a.Search,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),(0,t.jsxs)("p",{children:['No results found for "',e,'"']}),c?.universityId&&(0,t.jsxs)("p",{className:"text-sm mt-2",children:["Try searching for advisors or departments at ",c.universityName]})]})}):null;let x={universities:f.filter(e=>"university"===e.type),departments:f.filter(e=>"department"===e.type),advisors:f.filter(e=>"advisor"===e.type)};return Object.values(x).some(e=>e.length>0)?(0,t.jsx)("div",{ref:m,className:"absolute z-50 w-full mt-2 bg-white border border-gray-200 rounded-xl shadow-lg max-h-96 overflow-y-auto",role:"listbox","aria-label":"Search results",children:(0,t.jsxs)("div",{className:"p-2",children:[x.universities.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:["Universities (",x.universities.length,")"]}),x.universities.map(e=>(0,t.jsx)("div",{ref:e.index===u?p:null,children:(0,t.jsx)(h,{type:e.type,id:e.data.id,name:e.data.name,slug:e.data.slug,subtitle:e.subtitle,href:e.href,isSelected:e.index===u,onClick:o})},e.data.id))]}),x.departments.length>0&&(0,t.jsxs)("div",{className:x.universities.length>0?"mt-2":"",children:[(0,t.jsxs)("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:["Departments (",x.departments.length,")"]}),x.departments.map(e=>(0,t.jsx)("div",{ref:e.index===u?p:null,children:(0,t.jsx)(h,{type:e.type,id:e.data.id,name:e.data.name,slug:e.data.slug,subtitle:e.subtitle,href:e.href,isSelected:e.index===u,onClick:o})},e.data.id))]}),x.advisors.length>0&&(0,t.jsxs)("div",{className:x.departments.length>0||x.universities.length>0?"mt-2":"",children:[(0,t.jsxs)("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:["Advisors (",x.advisors.length,")"]}),x.advisors.map(e=>(0,t.jsx)("div",{ref:e.index===u?p:null,children:(0,t.jsx)(h,{type:e.type,id:e.data.id,name:e.data.name,slug:e.data.slug,subtitle:e.subtitle,href:e.href,isSelected:e.index===u,onClick:o})},e.data.id))]}),(c?.universityId||c?.departmentId)&&(0,t.jsx)("div",{className:"mt-2 pt-2 border-t border-gray-200",children:(0,t.jsx)("div",{ref:f.length===u?p:null,children:(0,t.jsxs)(l.default,{href:"/",className:(0,n.cn)("flex items-center gap-2 p-3 rounded-lg text-sm font-medium transition-colors","hover:bg-gray-50 focus:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-[#A78BFA] focus:ring-offset-1",f.length===u&&"bg-gray-50 ring-2 ring-[#A78BFA] ring-offset-1","text-[#5B2D8B]"),onClick:o,children:[(0,t.jsx)(d.GraduationCap,{className:"w-4 h-4"}),"Search another university..."]})})})]})}):null}function f({placeholder:e="Search universities, departments, advisors...",initialValue:l="",className:d,size:u="md",autoFocus:o=!1,helperText:c,context:m}){let[h,f]=(0,r.useState)(l),[x,g]=(0,r.useState)(null),[v,y]=(0,r.useState)(!1),[b,j]=(0,r.useState)(0),[N,w]=(0,r.useState)(!1),$=(0,s.useRouter)();(0,s.usePathname)();let S=(0,r.useRef)(null),I=(0,r.useRef)(null),k=(0,r.useRef)(void 0);(0,r.useEffect)(()=>{o&&S.current&&S.current.focus()},[o]),(0,r.useEffect)(()=>{function e(e){I.current&&!I.current.contains(e.target)&&w(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,r.useEffect)(()=>{if(h.trim().length<1){g(null),w(!1);return}return k.current&&clearTimeout(k.current),k.current=setTimeout(async()=>{y(!0),w(!0);try{let e=new URLSearchParams({query:h.trim()});m?.universityId&&e.set("universityId",m.universityId),m?.departmentId&&e.set("departmentId",m.departmentId);let t=await fetch(`/api/autocomplete?${e.toString()}`);if(t.ok){let e=await t.json();g(e.data||{universities:[],departments:[],advisors:[]})}else g({universities:[],departments:[],advisors:[]})}catch(e){console.error("Autocomplete error:",e),g({universities:[],departments:[],advisors:[]})}finally{y(!1)}},250),()=>{k.current&&clearTimeout(k.current)}},[h,m]);let A=()=>x?(x.universities?.length||0)+(x.departments?.length||0)+(x.advisors?.length||0)+(m?.universityId||m?.departmentId?1:0):0;return(0,t.jsxs)("div",{ref:I,className:(0,n.cn)("relative w-full",d),children:[(0,t.jsx)("form",{onSubmit:e=>{if(e.preventDefault(),h.trim().length>=1){let e=(()=>{if(!x)return[];let e=[];return m?.universityId||m?.departmentId?(x.advisors&&x.advisors.forEach(t=>{e.push({href:`/a/${t.id}/${t.slug}`})}),x.departments&&x.departments.forEach(t=>{e.push({href:`/d/${t.id}/${t.slug}`})})):(x.universities&&x.universities.forEach(t=>{e.push({href:`/u/${t.id}/${t.slug}`})}),x.departments&&x.departments.forEach(t=>{e.push({href:`/d/${t.id}/${t.slug}`})}),x.advisors&&x.advisors.forEach(t=>{e.push({href:`/a/${t.id}/${t.slug}`})})),e})();A(),e.length>0&&b>=0&&b<e.length?($.push(e[b].href),w(!1),f("")):m?.universityId&&b===e.length?($.push("/"),w(!1),f("")):($.push(`/search?q=${encodeURIComponent(h)}`),w(!1))}},children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none",children:(0,t.jsx)(a.Search,{className:"w-5 h-5 text-gray-400","aria-hidden":"true"})}),(0,t.jsx)("input",{ref:S,type:"text",value:h,onChange:e=>{f(e.target.value),j(0)},onKeyDown:e=>{let t=A();"ArrowDown"===e.key?(e.preventDefault(),j(e=>e<t-1?e+1:0)):"ArrowUp"===e.key?(e.preventDefault(),j(e=>e>0?e-1:t-1)):"Escape"===e.key?(e.preventDefault(),w(!1)):e.key},onFocus:()=>{(h.trim().length>0||x)&&w(!0)},placeholder:e,className:(0,n.cn)("w-full border border-gray-300 rounded-xl","focus:outline-none focus:ring-2 focus:ring-[#A78BFA] focus:border-transparent","placeholder:text-gray-400",h?"pr-12":"pr-4",{sm:"py-2 text-sm pl-10 pr-10",md:"py-3 text-base pl-12 pr-12",lg:"py-4 text-lg pl-14 pr-14"}[u]),"aria-label":e,"aria-expanded":N,"aria-haspopup":"listbox",role:"combobox",autoComplete:"off"}),h&&(0,t.jsx)("button",{type:"button",onClick:()=>{f(""),w(!1),S.current&&S.current.focus()},className:"absolute inset-y-0 right-0 flex items-center pr-4 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Clear search",children:(0,t.jsx)(i.X,{className:"w-5 h-5"})})]})}),c&&(0,t.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:c}),N&&(0,t.jsx)(p,{query:h,results:x,loading:v,selectedIndex:b,onSelect:()=>{w(!1),f("")},context:m})]})}e.s(["AutocompleteSearch",()=>f],33494)}]);