(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33494,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(18566),i=e.i(55436),a=e.i(37727),n=e.i(75157),l=e.i(22016),d=e.i(32095),u=e.i(7486),o=e.i(84614);let c={university:d.GraduationCap,department:u.Building2,advisor:o.User},m={university:"text-[#5B2D8B]",department:"text-blue-600",advisor:"text-teal-600"};function h({type:e,name:r,subtitle:s,href:i,isSelected:a=!1,onClick:d}){let u=c[e];return(0,t.jsxs)(l.default,{href:i,onClick:d,className:(0,n.cn)("flex items-start gap-3 p-3 rounded-lg transition-colors","hover:bg-gray-50 focus:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-[#A78BFA] focus:ring-offset-1",a&&"bg-gray-50 ring-2 ring-[#A78BFA] ring-offset-1"),role:"option","aria-selected":a,children:[(0,t.jsx)(u,{className:(0,n.cn)("w-5 h-5 flex-shrink-0 mt-0.5",m[e])}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"font-medium text-gray-900 truncate",children:r}),s&&(0,t.jsx)("div",{className:"text-sm text-gray-500 truncate mt-0.5",children:s})]})]})}function p({query:e,results:s,loading:a,selectedIndex:u,onSelect:o,context:c}){let m=(0,r.useRef)(null),p=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(p.current){let e=p.current.querySelector("a");e&&e.scrollIntoView({block:"nearest",behavior:"smooth"})}},[u]);let f=(()=>{if(!s)return[];let e={universities:Array.isArray(s.universities)?s.universities:[],departments:Array.isArray(s.departments)?s.departments:[],advisors:Array.isArray(s.advisors)?s.advisors:[]},t=[],r=0;return c?.universityId||c?.departmentId?(e.advisors&&e.advisors.length>0&&e.advisors.forEach(e=>{c?.departmentId,e.department.id,t.push({type:"advisor",data:e,href:`/a/${e.id}/${e.slug}`,subtitle:`${e.department.name} • ${e.university.name}`,index:r++})}),e.departments&&e.departments.length>0&&e.departments.forEach(e=>{t.push({type:"department",data:e,href:`/d/${e.id}/${e.slug}`,subtitle:e.university.name,index:r++})})):(e.universities&&e.universities.length>0&&e.universities.forEach(e=>{t.push({type:"university",data:e,href:`/u/${e.id}/${e.slug}`,subtitle:e.location||"",index:r++})}),e.departments&&e.departments.length>0&&e.departments.forEach(e=>{t.push({type:"department",data:e,href:`/d/${e.id}/${e.slug}`,subtitle:e.university.name,index:r++})}),e.advisors&&e.advisors.length>0&&e.advisors.forEach(e=>{t.push({type:"advisor",data:e,href:`/a/${e.id}/${e.slug}`,subtitle:`${e.department.name} • ${e.university.name}`,index:r++})})),t})();if(a)return(0,t.jsx)("div",{ref:m,className:"absolute z-50 w-full mt-2 bg-white border border-gray-200 rounded-xl shadow-lg max-h-96 overflow-y-auto",role:"listbox","aria-label":"Search results",children:(0,t.jsx)("div",{className:"p-4",children:(0,t.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3 animate-pulse",children:[(0,t.jsx)("div",{className:"w-5 h-5 bg-gray-200 rounded flex-shrink-0"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,t.jsx)("div",{className:"h-3 bg-gray-100 rounded w-1/2"})]})]},e))})})});if(!s||0===f.length)return e.trim().length>=1?(0,t.jsx)("div",{ref:m,className:"absolute z-50 w-full mt-2 bg-white border border-gray-200 rounded-xl shadow-lg",role:"listbox",children:(0,t.jsxs)("div",{className:"p-4 text-center text-gray-500",children:[(0,t.jsx)(i.Search,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),(0,t.jsxs)("p",{children:['No results found for "',e,'"']}),c?.universityId&&(0,t.jsxs)("p",{className:"text-sm mt-2",children:["Try searching for advisors or departments at ",c.universityName]})]})}):null;let v={universities:f.filter(e=>"university"===e.type),departments:f.filter(e=>"department"===e.type),advisors:f.filter(e=>"advisor"===e.type)};return Object.values(v).some(e=>e.length>0)?(0,t.jsx)("div",{ref:m,className:"absolute z-50 w-full mt-2 bg-white border border-gray-200 rounded-xl shadow-lg max-h-96 overflow-y-auto",role:"listbox","aria-label":"Search results",children:(0,t.jsxs)("div",{className:"p-2",children:[v.universities.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:["Universities (",v.universities.length,")"]}),v.universities.map(e=>(0,t.jsx)("div",{ref:e.index===u?p:null,children:(0,t.jsx)(h,{type:e.type,id:e.data.id,name:e.data.name,slug:e.data.slug,subtitle:e.subtitle,href:e.href,isSelected:e.index===u,onClick:o})},e.data.id))]}),v.departments.length>0&&(0,t.jsxs)("div",{className:v.universities.length>0?"mt-2":"",children:[(0,t.jsxs)("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:["Departments (",v.departments.length,")"]}),v.departments.map(e=>(0,t.jsx)("div",{ref:e.index===u?p:null,children:(0,t.jsx)(h,{type:e.type,id:e.data.id,name:e.data.name,slug:e.data.slug,subtitle:e.subtitle,href:e.href,isSelected:e.index===u,onClick:o})},e.data.id))]}),v.advisors.length>0&&(0,t.jsxs)("div",{className:v.departments.length>0||v.universities.length>0?"mt-2":"",children:[(0,t.jsxs)("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wide",children:["Advisors (",v.advisors.length,")"]}),v.advisors.map(e=>(0,t.jsx)("div",{ref:e.index===u?p:null,children:(0,t.jsx)(h,{type:e.type,id:e.data.id,name:e.data.name,slug:e.data.slug,subtitle:e.subtitle,href:e.href,isSelected:e.index===u,onClick:o})},e.data.id))]}),(c?.universityId||c?.departmentId)&&(0,t.jsx)("div",{className:"mt-2 pt-2 border-t border-gray-200",children:(0,t.jsx)("div",{ref:f.length===u?p:null,children:(0,t.jsxs)(l.default,{href:"/",className:(0,n.cn)("flex items-center gap-2 p-3 rounded-lg text-sm font-medium transition-colors","hover:bg-gray-50 focus:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-[#A78BFA] focus:ring-offset-1",f.length===u&&"bg-gray-50 ring-2 ring-[#A78BFA] ring-offset-1","text-[#5B2D8B]"),onClick:o,children:[(0,t.jsx)(d.GraduationCap,{className:"w-4 h-4"}),"Search another university..."]})})})]})}):null}function f({placeholder:e="Search universities, departments, advisors...",initialValue:l="",className:d,size:u="md",autoFocus:o=!1,helperText:c,context:m}){let[h,f]=(0,r.useState)(l),[v,g]=(0,r.useState)(null),[x,y]=(0,r.useState)(!1),[b,j]=(0,r.useState)(0),[w,N]=(0,r.useState)(!1),A=(0,s.useRouter)();(0,s.usePathname)();let $=(0,r.useRef)(null),I=(0,r.useRef)(null),S=(0,r.useRef)(void 0);(0,r.useEffect)(()=>{o&&$.current&&$.current.focus()},[o]),(0,r.useEffect)(()=>{function e(e){I.current&&!I.current.contains(e.target)&&N(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,r.useEffect)(()=>{if(h.trim().length<1){g(null),N(!1);return}return S.current&&clearTimeout(S.current),S.current=setTimeout(async()=>{y(!0),N(!0);try{let e=new URLSearchParams({query:h.trim()});m?.universityId&&e.set("universityId",m.universityId),m?.departmentId&&e.set("departmentId",m.departmentId);let t=`/api/autocomplete?${e.toString()}`,r=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json"}});if(r.ok){let e=await r.json();e.success&&e.data?g(e.data):(console.warn("Autocomplete API returned unexpected format:",e),g({universities:[],departments:[],advisors:[]}))}else{let e=await r.text();console.error(`Autocomplete API error (${r.status}):`,e),g({universities:[],departments:[],advisors:[]})}}catch(e){console.error("Autocomplete fetch error:",e),g({universities:[],departments:[],advisors:[]})}finally{y(!1)}},250),()=>{S.current&&clearTimeout(S.current)}},[h,m]);let E=()=>v?(v.universities?.length||0)+(v.departments?.length||0)+(v.advisors?.length||0)+(m?.universityId||m?.departmentId?1:0):0;return(0,t.jsxs)("div",{ref:I,className:(0,n.cn)("relative w-full",d),children:[(0,t.jsx)("form",{onSubmit:e=>{if(e.preventDefault(),h.trim().length>=1){let e=(()=>{if(!v)return[];let e=[];return m?.universityId||m?.departmentId?(v.advisors&&v.advisors.forEach(t=>{e.push({href:`/a/${t.id}/${t.slug}`})}),v.departments&&v.departments.forEach(t=>{e.push({href:`/d/${t.id}/${t.slug}`})})):(v.universities&&v.universities.forEach(t=>{e.push({href:`/u/${t.id}/${t.slug}`})}),v.departments&&v.departments.forEach(t=>{e.push({href:`/d/${t.id}/${t.slug}`})}),v.advisors&&v.advisors.forEach(t=>{e.push({href:`/a/${t.id}/${t.slug}`})})),e})();E(),e.length>0&&b>=0&&b<e.length?(A.push(e[b].href),N(!1),f("")):m?.universityId&&b===e.length?(A.push("/"),N(!1),f("")):(A.push(`/search?q=${encodeURIComponent(h)}`),N(!1))}},children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none",children:(0,t.jsx)(i.Search,{className:"w-5 h-5 text-gray-400","aria-hidden":"true"})}),(0,t.jsx)("input",{ref:$,type:"text",value:h,onChange:e=>{f(e.target.value),j(0)},onKeyDown:e=>{let t=E();"ArrowDown"===e.key?(e.preventDefault(),j(e=>e<t-1?e+1:0)):"ArrowUp"===e.key?(e.preventDefault(),j(e=>e>0?e-1:t-1)):"Escape"===e.key?(e.preventDefault(),N(!1)):e.key},onFocus:()=>{(h.trim().length>0||v)&&N(!0)},placeholder:e,className:(0,n.cn)("w-full border border-gray-300 rounded-xl","focus:outline-none focus:ring-2 focus:ring-[#A78BFA] focus:border-transparent","placeholder:text-gray-400",h?"pr-12":"pr-4",{sm:"py-2 text-sm pl-10 pr-10",md:"py-3 text-base pl-12 pr-12",lg:"py-4 text-lg pl-14 pr-14"}[u]),"aria-label":e,"aria-expanded":w,"aria-haspopup":"listbox",role:"combobox",autoComplete:"off"}),h&&(0,t.jsx)("button",{type:"button",onClick:()=>{f(""),N(!1),$.current&&$.current.focus()},className:"absolute inset-y-0 right-0 flex items-center pr-4 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Clear search",children:(0,t.jsx)(a.X,{className:"w-5 h-5"})})]})}),c&&(0,t.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:c}),w&&h.trim().length>0&&(0,t.jsx)(p,{query:h,results:v,loading:x,selectedIndex:b,onSelect:()=>{N(!1),f("")},context:m})]})}e.s(["AutocompleteSearch",()=>f],33494)},9703,e=>{"use strict";var t=e.i(71645),r=e.i(45186);function s({university:e}){let{setUniversity:s,selectedUniversity:i}=(0,r.useUniversityContext)();return(0,t.useEffect)(()=>{i&&i.id===e.id||s(e)},[e,i,s]),null}e.s(["UniversityContextSync",()=>s])}]);