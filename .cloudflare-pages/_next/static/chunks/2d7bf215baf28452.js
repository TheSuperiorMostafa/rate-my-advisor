(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70508,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(19455);function r(){let[e,r]=(0,s.useState)("universities"),[l,i]=(0,s.useState)([]),[d,n]=(0,s.useState)([]),[c,m]=(0,s.useState)([]),[o,x]=(0,s.useState)(!0),[p,u]=(0,s.useState)(!1),[h,y]=(0,s.useState)({}),[g,j]=(0,s.useState)(null);(0,s.useEffect)(()=>{v()},[e]);let v=async()=>{x(!0);try{if("universities"===e){let e=await fetch("/api/admin/universities");if(e.ok){let t=await e.json();i(t)}}else if("departments"===e){let e=await fetch("/api/admin/departments");if(e.ok){let t=await e.json();n(t)}}else if("advisors"===e){let e=await fetch("/api/admin/advisors");if(e.ok){let t=await e.json();m(t)}}}catch(e){console.error("Error loading data:",e),j("Failed to load data")}finally{x(!1)}},f=async(e,t)=>{if(confirm(`Are you sure you want to delete this ${t.slice(0,-1)}?`))try{let s=`/api/admin/${t}/${e}`,a=await fetch(s,{method:"DELETE"});if(a.ok)v();else{let e=await a.json();alert(e.error||"Failed to delete")}}catch(e){console.error("Error deleting:",e),alert("Failed to delete")}},N=async t=>{t.preventDefault(),j(null);try{let t=`/api/admin/${e}`,s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}),a=await s.json();if(s.ok)u(!1),y({}),v();else{let e=a.error||a.details?.[0]?.message||"Failed to create";j(e),console.error("Create error:",a)}}catch(e){console.error("Error creating:",e),j(e instanceof Error?e.message:"Failed to create")}},b=e=>e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"border-b border-gray-200",children:(0,t.jsx)("nav",{className:"-mb-px flex space-x-8",children:["universities","departments","advisors"].map(s=>(0,t.jsx)("button",{onClick:()=>r(s),className:`py-4 px-1 border-b-2 font-medium text-sm ${e===s?"border-[#A78BFA] text-[#5B2D8B]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:s.charAt(0).toUpperCase()+s.slice(1)},s))})}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:e.charAt(0).toUpperCase()+e.slice(1)}),(0,t.jsx)(a.Button,{onClick:()=>u(!p),children:p?"Cancel":`Add ${e.slice(0,-1)}`})]}),p&&(0,t.jsxs)("form",{onSubmit:N,className:"bg-white p-6 rounded-lg shadow space-y-4",children:["universities"===e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name *"}),(0,t.jsx)("input",{type:"text",required:!0,value:h.name||"",onChange:e=>{let t=e.target.value;y({...h,name:t,slug:b(t)})},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Slug *"}),(0,t.jsx)("input",{type:"text",required:!0,value:h.slug||"",onChange:e=>y({...h,slug:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Location (optional)"}),(0,t.jsx)("input",{type:"text",value:h.location||"",onChange:e=>y({...h,location:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"e.g., Cambridge, MA"})]})]}),"departments"===e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"University *"}),(0,t.jsxs)("select",{required:!0,value:h.universityId||"",onChange:e=>y({...h,universityId:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",children:[(0,t.jsx)("option",{value:"",children:"Select university"}),l.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name *"}),(0,t.jsx)("input",{type:"text",required:!0,value:h.name||"",onChange:e=>{let t=e.target.value;y({...h,name:t,slug:b(t)})},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Slug *"}),(0,t.jsx)("input",{type:"text",required:!0,value:h.slug||"",onChange:e=>y({...h,slug:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]})]}),"advisors"===e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Department *"}),(0,t.jsxs)("select",{required:!0,value:h.departmentId||"",onChange:e=>y({...h,departmentId:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",children:[(0,t.jsx)("option",{value:"",children:"Select department"}),d.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.university.name," - ",e.name]},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"First Name *"}),(0,t.jsx)("input",{type:"text",required:!0,value:h.firstName||"",onChange:e=>{let t=e.target.value,s=h.lastName||"";y({...h,firstName:t,slug:b(`${t} ${s}`)})},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Last Name *"}),(0,t.jsx)("input",{type:"text",required:!0,value:h.lastName||"",onChange:e=>{let t=e.target.value,s=h.firstName||"";y({...h,lastName:t,slug:b(`${s} ${t}`)})},className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Slug *"}),(0,t.jsx)("input",{type:"text",required:!0,value:h.slug||"",onChange:e=>y({...h,slug:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Title (optional)"}),(0,t.jsx)("input",{type:"text",value:h.title||"",onChange:e=>y({...h,title:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",placeholder:"e.g., Senior Academic Advisor"})]})]}),g&&(0,t.jsx)("div",{className:"text-red-600 text-sm",children:g}),(0,t.jsx)(a.Button,{type:"submit",children:"Create"})]}),o?(0,t.jsx)("div",{className:"text-center py-8",children:"Loading..."}):(0,t.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:["universities"===e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Slug"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Departments"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]}),"departments"===e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"University"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Advisors"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]}),"advisors"===e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"University"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Department"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Reviews"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})]})}),(0,t.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:["universities"===e&&l.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.name}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.slug}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e._count.departments}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,t.jsx)("button",{onClick:()=>f(e.id,"universities"),className:"text-red-600 hover:text-red-900",children:"Delete"})})]},e.id)),"departments"===e&&d.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.university.name}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.name}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e._count.advisors}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,t.jsx)("button",{onClick:()=>f(e.id,"departments"),className:"text-red-600 hover:text-red-900",children:"Delete"})})]},e.id)),"advisors"===e&&c.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.department.university.name}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.department.name}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.name}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e._count.reviews}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,t.jsx)("button",{onClick:()=>f(e.id,"advisors"),className:"text-red-600 hover:text-red-900",children:"Delete"})})]},e.id))]})]})})]})}e.s(["ManageContent",()=>r])}]);