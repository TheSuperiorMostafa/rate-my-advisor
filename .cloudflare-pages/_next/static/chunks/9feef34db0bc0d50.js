(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,86664,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566),a=e.i(55436),l=e.i(37727),i=e.i(75157);function n({placeholder:e="Search...",initialValue:n="",onSearch:d,className:c,size:o="md",autoFocus:m=!1}){let[h,u]=(0,s.useState)(n),x=(0,r.useRouter)(),g=(0,r.useSearchParams)(),p=(0,s.useRef)(null),v=(0,s.useRef)(void 0);return(0,s.useEffect)(()=>{let e=g.get("q")||"";e!==h&&u(e)},[g]),(0,s.useEffect)(()=>{m&&p.current&&p.current.focus()},[m]),(0,t.jsx)("form",{onSubmit:e=>{e.preventDefault(),d?d(h):x.push(`/search?q=${encodeURIComponent(h)}`)},className:(0,i.cn)("w-full",c),children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none",children:(0,t.jsx)(a.Search,{className:"w-5 h-5 text-gray-400","aria-hidden":"true"})}),(0,t.jsx)("input",{ref:p,type:"text",value:h,onChange:e=>{var t;u(t=e.target.value),v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{if(!d&&t){let e=new URLSearchParams(g.toString());t?e.set("q",t):e.delete("q"),x.push(`?${e.toString()}`,{scroll:!1})}},300)},placeholder:e,className:(0,i.cn)("w-full border border-gray-300 rounded-xl","focus:outline-none focus:ring-2 focus:ring-[#A78BFA] focus:border-transparent","placeholder:text-gray-400",h?"pr-12":"pr-4","pl-12",{sm:"py-2 text-sm",md:"py-3 text-base",lg:"py-4 text-lg"}[o]),"aria-label":e}),h&&(0,t.jsx)("button",{type:"button",onClick:()=>{if(u(""),p.current&&p.current.focus(),!d){let e=new URLSearchParams(g.toString());e.delete("q"),x.push(`?${e.toString()}`,{scroll:!1})}},className:"absolute inset-y-0 right-0 flex items-center pr-4 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Clear search",children:(0,t.jsx)(l.X,{className:"w-5 h-5"})})]})})}var d=e.i(22016);function c({query:e,type:a}){let l=(0,r.useSearchParams)(),[i,c]=(0,s.useState)(e),[o,m]=(0,s.useState)(a),[h,u]=(0,s.useState)(null),[x,g]=(0,s.useState)(!1),[p,v]=(0,s.useState)(null);(0,s.useEffect)(()=>{i.trim().length>=2?b(i,o):u(null)},[i,o]);let b=async(e,t)=>{g(!0),v(null);try{let s=await fetch(`/api/search?q=${encodeURIComponent(e)}&type=${t}`);if(!s.ok)throw Error("Search failed");let r=await s.json();u(r.data||{universities:[],departments:[],advisors:[]})}catch(e){v(e instanceof Error?e.message:"Failed to search"),u(null)}finally{g(!1)}},y=(h?.universities.length||0)+(h?.departments.length||0)+(h?.advisors.length||0);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,t.jsx)(n,{placeholder:"Search universities, departments, or advisors...",initialValue:i,onSearch:e=>{c(e);let t=new URLSearchParams(l.toString());t.set("q",e),window.history.pushState({},"",`/search?${t.toString()}`)}})}),(0,t.jsx)("div",{className:"flex gap-2",children:["all","university","department","advisor"].map(e=>(0,t.jsx)("button",{onClick:()=>m(e),className:`px-4 py-2 rounded-md text-sm font-medium ${o===e?"bg-[#5B2D8B] text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),x&&(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-500",children:"Searching..."})}),p&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,t.jsx)("p",{className:"text-red-800",children:p})}),!x&&!p&&i.trim().length<2&&(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-500",children:"Enter at least 2 characters to search"})}),!x&&!p&&i.trim().length>=2&&0===y&&(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsxs)("p",{className:"text-gray-500",children:['No results found for "',i,'"']})}),!x&&!p&&h&&y>0&&(0,t.jsxs)("div",{className:"space-y-8",children:[("all"===o||"university"===o)&&h.universities.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:["Universities (",h.universities.length,")"]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.universities.map(e=>(0,t.jsxs)(d.default,{href:`/u/${e.id}/${e.slug}`,className:"block p-4 bg-white border border-gray-200 rounded-lg hover:border-violet-300 hover:shadow-md transition-all",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:e.name}),e.location&&(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.location}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[e.departmentCount," ",1===e.departmentCount?"department":"departments"]})]},e.id))})]}),("all"===o||"department"===o)&&h.departments.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:["Departments (",h.departments.length,")"]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.departments.map(e=>(0,t.jsxs)(d.default,{href:`/d/${e.id}/${e.slug}`,className:"block p-4 bg-white border border-gray-200 rounded-lg hover:border-violet-300 hover:shadow-md transition-all",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.university.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[e.advisorCount," ",1===e.advisorCount?"advisor":"advisors"]})]},e.id))})]}),("all"===o||"advisor"===o)&&h.advisors.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:["Advisors (",h.advisors.length,")"]}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.advisors.map(e=>(0,t.jsxs)(d.default,{href:`/a/${e.id}/${e.slug}`,className:"block p-4 bg-white border border-gray-200 rounded-lg hover:border-violet-300 hover:shadow-md transition-all",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:e.name}),e.title&&(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:e.title}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[e.department.name," - ",e.university.name]}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[e.reviewCount," ",1===e.reviewCount?"review":"reviews"]})]},e.id))})]})]})]})}e.s(["SearchResults",()=>c],86664)}]);